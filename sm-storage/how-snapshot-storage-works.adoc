---
permalink: sm-storage/how-snapshot-storage-works.html 
sidebar: sidebar 
keywords: SANtricity, System Manager, E-Series, snapshot, storage 
summary: '스냅샷 기능은 COW(Copy-on-Write) 기술을 사용하여 스냅샷 이미지를 저장하고 할당된 예약 용량을 사용합니다.' 
---
= 스냅샷 스토리지의 작동 방식
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
스냅샷 기능은 COW(Copy-on-Write) 기술을 사용하여 스냅샷 이미지를 저장하고 할당된 예약 용량을 사용합니다.



== 스냅샷 이미지 사용 방법

스냅샷 이미지는 특정 시점에 캡처된 볼륨 내용의 논리적 읽기 전용 복사본입니다. 스냅샷을 사용하여 데이터 손실을 방지할 수 있습니다.

스냅샷 이미지는 테스트 환경에도 유용합니다. 데이터의 가상 복제본을 생성하여 실제 볼륨 자체를 변경하지 않고 스냅샷을 사용하여 데이터를 테스트할 수 있습니다. 또한 호스트는 스냅샷 이미지에 대한 쓰기 액세스 권한이 없으므로 스냅샷은 항상 안전한 백업 리소스입니다.



== 스냅샷 생성

스냅샷이 생성될 때 스냅샷 기능은 다음과 같이 이미지 데이터를 저장합니다.

* 스냅샷 이미지가 생성되면 기본 볼륨과 정확히 일치합니다. 스냅샷 기능은 쓰기 시 복사 기술을 사용합니다. 스냅샷을 생성한 후 기본 볼륨의 블록 또는 블록 세트에 처음으로 데이터를 쓰게 되면 새 데이터를 기본 볼륨에 쓰기 전에 원래 데이터가 예약된 용량으로 복제됩니다.
* 후속 스냅샷에는 변경된 데이터 블록만 포함됩니다. 기본 볼륨에서 데이터를 덮어쓰기 전에 스냅샷 기능은 copy-on-write 기술을 사용하여 영향을 받는 섹터의 필요한 이미지를 스냅샷 예약 용량에 저장합니다.
+
image::../media/sam1130-dwg-snapshots-cow-overview.gif[sam1130 DWG 스냅샷 COW 개요]



^1^기본 볼륨(물리 디스크 용량);^2^스냅샷(논리적 디스크 용량);^3^예약된 용량(물리 디스크 용량)

* 예약된 용량에는 스냅샷을 생성한 후 변경된 기본 볼륨의 일부에 대한 원본 데이터 블록이 저장되며 변경 내용 추적을 위한 인덱스가 포함됩니다. 일반적으로 예약된 용량의 크기는 기본 볼륨의 40%로 기본 설정됩니다. (예약된 용량이 더 필요한 경우 예약된 용량을 늘릴 수 있습니다.)
* 스냅샷 이미지는 타임 스탬프를 기준으로 특정 순서로 저장됩니다. 기본 볼륨의 가장 오래된 스냅샷 이미지만 수동으로 삭제할 수 있습니다.




== 스냅샷 복원

데이터를 기본 볼륨으로 복원하려면 스냅샷 볼륨 또는 스냅샷 이미지를 사용할 수 있습니다.

* * 스냅샷 볼륨 * -- 삭제된 파일을 검색해야 하는 경우, 알려진 양호한 스냅샷 이미지에서 스냅샷 볼륨을 생성한 다음 호스트에 할당합니다.
* * 스냅샷 이미지 * -- 기본 볼륨을 특정 시점으로 복원해야 하는 경우 이전 스냅샷 이미지를 사용하여 데이터를 기본 볼륨으로 롤백합니다.

